!function(e){function t(i){if(n[i])return n[i].exports;var r=n[i]={exports:{},id:i,loaded:!1};return e[i].call(r.exports,r,r.exports,t),r.loaded=!0,r.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}var r=n(5),a=i(r);$.fn.flowFileUpload=function(){var e=this,t=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],n={flowOptions:{}};return this.each(function(){var i=e.data("flowFileUpload");if(!i){var r=new a["default"](e,$.extend(!0,{},t,n));e.data("flowFileUpload",r)}})}},function(e,t){e.exports={file:"maN0qq5QwSTxOuzTCaO1Z",iconButton:"_2XDe0LmMSSwIr8TeyWGd5i",progressLine:"jdYorQ_rCPjLV4aU1kJvH",progressLineUploading:"_3_7T1coVRNNgg5tcCaMttQ",progressLineCompleted:"KrHh3OwaeLbCrsE0I5U8g",info:"_2k1CKp_VyAV1-6g875puWi",control:"_3qPwKOrLN8Nb9KJtn9B0hL",filename:"_3hFCBAF-_xAHhZqwQyiv14"}},function(e,t,n){var i=n(3);e.exports=function(e){var t,r=[],a=e||{};return function(e,a){a=n(1),r.push("<div"+i.cls([a.file],[!0])+"><div"+i.cls([a.info],[!0])+"><div"+i.cls([a.filename],[!0])+">"+i.escape(null==(t=e)?"":t)+'</div><div><div data-el="progress"'+i.cls([a.progressLine,a.progressLineCompleted],[!0,!0])+"></div></div><div"+i.cls([a.control],[!0])+'><span data-el="remove"'+i.cls(["glyphicon","glyphicon-remove",a.iconButton],[null,null,!0])+"></span></div></div></div>")}.call(this,"filename"in a?a.filename:"undefined"!=typeof filename?filename:void 0,"style"in a?a.style:"undefined"!=typeof style?style:void 0),r.join("")}},function(e,t,n){"use strict";function i(e){return null!=e&&""!==e}function r(e){return(Array.isArray(e)?e.map(r):e&&"object"==typeof e?Object.keys(e).filter(function(t){return e[t]}):[e]).filter(i).join(" ")}function a(e){return s[e]||e}function o(e){var t=String(e).replace(l,a);return t===""+e?e:t}t.merge=function u(e,t){if(1===arguments.length){for(var n=e[0],r=1;r<e.length;r++)n=u(n,e[r]);return n}var a=e["class"],o=t["class"];(a||o)&&(a=a||[],o=o||[],Array.isArray(a)||(a=[a]),Array.isArray(o)||(o=[o]),e["class"]=a.concat(o).filter(i));for(var s in t)"class"!=s&&(e[s]=t[s]);return e},t.joinClasses=r,t.cls=function(e,n){for(var i=[],a=0;a<e.length;a++)n&&n[a]?i.push(t.escape(r([e[a]]))):i.push(r(e[a]));var o=r(i);return o.length?' class="'+o+'"':""},t.style=function(e){return e&&"object"==typeof e?Object.keys(e).map(function(t){return t+":"+e[t]}).join(";"):e},t.attr=function(e,n,i,r){return"style"===e&&(n=t.style(n)),"boolean"==typeof n||null==n?n?" "+(r?e:e+'="'+e+'"'):"":0==e.indexOf("data")&&"string"!=typeof n?(-1!==JSON.stringify(n).indexOf("&")&&console.warn("Since Jade 2.0.0, ampersands (`&`) in data attributes will be escaped to `&amp;`"),n&&"function"==typeof n.toISOString&&console.warn("Jade will eliminate the double quotes around dates in ISO form after 2.0.0")," "+e+"='"+JSON.stringify(n).replace(/'/g,"&apos;")+"'"):i?(n&&"function"==typeof n.toISOString&&console.warn("Jade will stringify dates in ISO form after 2.0.0")," "+e+'="'+t.escape(n)+'"'):(n&&"function"==typeof n.toISOString&&console.warn("Jade will stringify dates in ISO form after 2.0.0")," "+e+'="'+n+'"')},t.attrs=function(e,n){var i=[],a=Object.keys(e);if(a.length)for(var o=0;o<a.length;++o){var s=a[o],l=e[s];"class"==s?(l=r(l))&&i.push(" "+s+'="'+l+'"'):i.push(t.attr(s,l,!1,n))}return i.join("")};var s={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;"},l=/[&<>"]/g;t.escape=o,t.rethrow=function f(e,t,i,r){if(!(e instanceof Error))throw e;if(!("undefined"==typeof window&&t||r))throw e.message+=" on line "+i,e;try{r=r||n(10).readFileSync(t,"utf8")}catch(a){f(e,null,i)}var o=3,s=r.split("\n"),l=Math.max(i-o,0),u=Math.min(s.length,i+o),o=s.slice(l,u).map(function(e,t){var n=t+l+1;return(n==i?"  > ":"    ")+n+"| "+e}).join("\n");throw e.path=t,e.message=(t||"Jade")+":"+i+"\n"+o+"\n\n"+e.message,e},t.DebugItem=function(e,t){this.lineno=e,this.filename=t}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();Object.defineProperty(t,"__esModule",{value:!0});var o=n(2),s=i(o),l=n(6),u=i(l),f=function(){function e(t,n){var i=this;r(this,e),this.flowFile=t,this.inputObj=n,this.$container=$("<div/>"),this.render(),this.$container.on("click","[data-el=remove]",function(){i.destroy()}),this.progressBar=new u["default"](this.$container.find("[data-el=progress]")),this.updateProgress()}return a(e,[{key:"render",value:function(){var e={filename:this.flowFile.name};this.$container.html((0,s["default"])(e))}},{key:"appendTo",value:function(e){this.$container.appendTo(e)}},{key:"destroy",value:function(){this.$container.remove(),this.flowFile.cancel(),this.inputObj.removeFile(this.flowFile.uniqueIdentifier)}},{key:"updateProgress",value:function(){this.flowFile.isComplete()?this.progressBar.complete():(this.progressBar.setProgress(this.flowFile.progress(!1)),setTimeout(this.updateProgress.bind(this),100))}},{key:"setFilename",value:function(e){this.filename=e}},{key:"getFilename",value:function(){return this.filename}}]),e}();t["default"]=f},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();Object.defineProperty(t,"__esModule",{value:!0});var o=n(9),s=i(o),l=n(4),u=i(l),f=n(7),c=i(f),d=function(){function e(t,n){var i=this;r(this,e),this.$input=t,this.$container=$("<div/>").html((0,s["default"])()),this.$input.after(this.$container),this.flow=new Flow(n.flowOptions),this.uploadedFiles={},this.files={},this.headers=n.flowOptions.headers,this.options=n,this.restoreFiles(),this.createFlowInputs(),this.flow.on("filesSubmitted",function(e){i.flow.upload(),i.appendFiles(e)}),this.flow.on("fileSuccess",function(e,t){var n=JSON.parse(t),r=n.filename;i.uploadedFiles[r]=e.name,i.files[e.uniqueIdentifier].setFilename(r),i.updateValue()})}return a(e,[{key:"updateValue",value:function(){var e=Object.keys(this.uploadedFiles);e.length?this.$input.val(JSON.stringify(this.uploadedFiles)):this.$input.val("")}},{key:"appendFiles",value:function(e){var t=this;e.forEach(function(e){var n=new u["default"](e,t);n.appendTo(t.$container.find("[data-el=files]")),t.files[e.uniqueIdentifier]=n})}},{key:"removeFile",value:function(e){if(e in this.files&&this.files.hasOwnProperty(e)){var t=this.files[e].getFilename();delete this.files[e],this.removeUploadedFile(t)}}},{key:"removeUploadedFile",value:function(e){if(null!==e&&void 0!==e&&e in this.uploadedFiles){delete this.uploadedFiles[e],this.updateValue();var t=this.options.deleteUrl+"?filename="+e;$.ajax({url:t,type:"POST",headers:this.headers})}}},{key:"restoreFiles",value:function(){var e=this.$input.val();if(e){this.uploadedFiles=JSON.parse(e);var t=Object.keys(this.uploadedFiles),n=!0,i=!1,r=void 0;try{for(var a,o=t[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var s=a.value,l={filename:s,viewName:this.uploadedFiles[s]},u=new c["default"](l,this);u.appendTo(this.$container.find("[data-el=files]"))}}catch(f){i=!0,r=f}finally{try{!n&&o["return"]&&o["return"]()}finally{if(i)throw r}}}}},{key:"createFlowInputs",value:function(){this.flow.assignBrowse(this.$container.find("[data-el=browseLink]")[0]),this.flow.assignDrop(this.$container.find("[data-el=dropArea]")[0])}}]),e}();t["default"]=d},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),s=i(o),l=function(){function e(t){r(this,e),this.$el=t,this.$el.removeClass(s["default"].progressLineCompleted),this.$el.addClass(s["default"].progressLineUploading),this.setProgress(0)}return a(e,[{key:"setProgress",value:function(e){if(this.progress!==e){var t=Math.round(100*e);this.$el.css({width:t+"%"}),this.progress=e}}},{key:"complete",value:function(){this.$el.removeClass(s["default"].progressLineUploading),this.$el.addClass(s["default"].progressLineCompleted),this.setProgress(1)}}]),e}();t["default"]=l},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();Object.defineProperty(t,"__esModule",{value:!0});var o=n(2),s=i(o),l=function(){function e(t,n){var i=this;r(this,e),this.inputObj=n,this.filename=t.filename,this.$container=$(document.createElement("div")),this.$container.html((0,s["default"])({filename:t.viewName})),this.$container.on("click","[data-el=remove]",function(){i.destroy()})}return a(e,[{key:"appendTo",value:function(e){this.$container.appendTo(e)}},{key:"destroy",value:function(){this.$container.remove(),this.inputObj.removeUploadedFile(this.filename)}}]),e}();t["default"]=l},function(e,t){e.exports={browseLink:"_2hfaxU6GJ2Fk_9AhaYXI-V",dropArea:"_1um-Eo0Gff6ijU5r7V-wiX"}},function(e,t,n){var i=n(3);e.exports=function(e){var t=[],r=e||{};return function(e){e=n(8),t.push('<div data-el="dropArea"'+i.cls([e.dropArea],[!0])+'><span class="glyphicon glyphicon-cloud-download"></span> Перетащите сюда файл или <span data-el="browseLink"'+i.cls([e.browseLink],[!0])+'>выберите</span></div><div data-el="files"></div>')}.call(this,"style"in r?r.style:"undefined"!=typeof style?style:void 0),t.join("")}},function(e,t){}]);