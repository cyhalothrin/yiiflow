!function(e){function t(i){if(n[i])return n[i].exports;var r=n[i]={exports:{},id:i,loaded:!1};return e[i].call(r.exports,r,r.exports,t),r.loaded=!0,r.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}var r=n(6),o=i(r);$.fn.flowFileUpload=function(){for(var e=this,t=arguments.length,n=Array(t>1?t-1:0),i=1;t>i;i++)n[i-1]=arguments[i];var r=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],a={flowOptions:{}},s=["reset"];return this.each(function(){var t=e.data("flowFileUpload");t instanceof o["default"]&&"string"==typeof r&&-1!==s.indexOf(r)?t[r].apply(t,n):void 0===t&&(t=new o["default"](e,$.extend(!0,{},r,a)),e.data("flowFileUpload",t))})}},function(e,t){e.exports={file:"maN0qq5QwSTxOuzTCaO1Z",iconButton:"_2XDe0LmMSSwIr8TeyWGd5i",progressLine:"jdYorQ_rCPjLV4aU1kJvH",progressLineUploading:"_3_7T1coVRNNgg5tcCaMttQ",progressLineCompleted:"KrHh3OwaeLbCrsE0I5U8g",info:"_2k1CKp_VyAV1-6g875puWi",control:"_3qPwKOrLN8Nb9KJtn9B0hL",filename:"_3hFCBAF-_xAHhZqwQyiv14"}},function(e,t){e.exports={browseLink:"_2hfaxU6GJ2Fk_9AhaYXI-V",dropArea:"_1um-Eo0Gff6ijU5r7V-wiX",dropAreaActive:"_2hV8V32b5QRpqj9Mmc6VuJ"}},function(e,t,n){var i=n(4);e.exports=function(e){var t,r=[],o=e||{};return function(e,o){o=n(1),r.push("<div"+i.cls([o.file],[!0])+"><div"+i.cls([o.info],[!0])+"><div"+i.cls([o.filename],[!0])+">"+i.escape(null==(t=e)?"":t)+'</div><div><div data-el="progress"'+i.cls([o.progressLine,o.progressLineCompleted],[!0,!0])+"></div></div><div"+i.cls([o.control],[!0])+'><span data-el="remove"'+i.cls(["glyphicon","glyphicon-remove",o.iconButton],[null,null,!0])+"></span></div></div></div>")}.call(this,"filename"in o?o.filename:"undefined"!=typeof filename?filename:void 0,"style"in o?o.style:"undefined"!=typeof style?style:void 0),r.join("")}},function(e,t,n){"use strict";function i(e){return null!=e&&""!==e}function r(e){return(Array.isArray(e)?e.map(r):e&&"object"==typeof e?Object.keys(e).filter(function(t){return e[t]}):[e]).filter(i).join(" ")}function o(e){return s[e]||e}function a(e){var t=String(e).replace(l,o);return t===""+e?e:t}t.merge=function u(e,t){if(1===arguments.length){for(var n=e[0],r=1;r<e.length;r++)n=u(n,e[r]);return n}var o=e["class"],a=t["class"];(o||a)&&(o=o||[],a=a||[],Array.isArray(o)||(o=[o]),Array.isArray(a)||(a=[a]),e["class"]=o.concat(a).filter(i));for(var s in t)"class"!=s&&(e[s]=t[s]);return e},t.joinClasses=r,t.cls=function(e,n){for(var i=[],o=0;o<e.length;o++)n&&n[o]?i.push(t.escape(r([e[o]]))):i.push(r(e[o]));var a=r(i);return a.length?' class="'+a+'"':""},t.style=function(e){return e&&"object"==typeof e?Object.keys(e).map(function(t){return t+":"+e[t]}).join(";"):e},t.attr=function(e,n,i,r){return"style"===e&&(n=t.style(n)),"boolean"==typeof n||null==n?n?" "+(r?e:e+'="'+e+'"'):"":0==e.indexOf("data")&&"string"!=typeof n?(-1!==JSON.stringify(n).indexOf("&")&&console.warn("Since Jade 2.0.0, ampersands (`&`) in data attributes will be escaped to `&amp;`"),n&&"function"==typeof n.toISOString&&console.warn("Jade will eliminate the double quotes around dates in ISO form after 2.0.0")," "+e+"='"+JSON.stringify(n).replace(/'/g,"&apos;")+"'"):i?(n&&"function"==typeof n.toISOString&&console.warn("Jade will stringify dates in ISO form after 2.0.0")," "+e+'="'+t.escape(n)+'"'):(n&&"function"==typeof n.toISOString&&console.warn("Jade will stringify dates in ISO form after 2.0.0")," "+e+'="'+n+'"')},t.attrs=function(e,n){var i=[],o=Object.keys(e);if(o.length)for(var a=0;a<o.length;++a){var s=o[a],l=e[s];"class"==s?(l=r(l))&&i.push(" "+s+'="'+l+'"'):i.push(t.attr(s,l,!1,n))}return i.join("")};var s={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;"},l=/[&<>"]/g;t.escape=a,t.rethrow=function f(e,t,i,r){if(!(e instanceof Error))throw e;if(!("undefined"==typeof window&&t||r))throw e.message+=" on line "+i,e;try{r=r||n(10).readFileSync(t,"utf8")}catch(o){f(e,null,i)}var a=3,s=r.split("\n"),l=Math.max(i-a,0),u=Math.min(s.length,i+a),a=s.slice(l,u).map(function(e,t){var n=t+l+1;return(n==i?"  > ":"    ")+n+"| "+e}).join("\n");throw e.path=t,e.message=(t||"Jade")+":"+i+"\n"+a+"\n\n"+e.message,e},t.DebugItem=function(e,t){this.lineno=e,this.filename=t}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();Object.defineProperty(t,"__esModule",{value:!0});var a=n(3),s=i(a),l=n(7),u=i(l),f=function(){function e(t,n){var i=this;r(this,e),this.flowFile=t,this.inputObj=n,this.$container=$("<div/>"),this.render(),this.$container.on("click","[data-el=remove]",function(){i.destroy()}),this.progressBar=new u["default"](this.$container.find("[data-el=progress]")),this.updateProgress()}return o(e,[{key:"render",value:function(){var e={filename:this.flowFile.name};this.$container.html((0,s["default"])(e))}},{key:"appendTo",value:function(e){this.$container.appendTo(e)}},{key:"destroy",value:function(){this.remove(),this.flowFile.cancel(),this.inputObj.removeFile(this.flowFile.uniqueIdentifier)}},{key:"updateProgress",value:function(){this.flowFile.isComplete()?this.progressBar.complete():(this.progressBar.setProgress(this.flowFile.progress(!1)),setTimeout(this.updateProgress.bind(this),100))}},{key:"setTempName",value:function(e){this.tempName=e}},{key:"getTempName",value:function(){return this.tempName}},{key:"remove",value:function(){this.$container.remove()}}]),e}();t["default"]=f},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();Object.defineProperty(t,"__esModule",{value:!0});var a=n(9),s=i(a),l=n(5),u=i(l),f=n(8),c=i(f),d=n(2),p=i(d),h=function(){function e(t,n){var i=this;r(this,e),this.$input=t,this.$container=$("<div/>").html((0,s["default"])()),this.$input.after(this.$container),this.flow=new Flow(n.flowOptions),this.uploadedFiles={},this.files={},this.headers=n.flowOptions.headers,this.options=n,this.restoreFiles(),this.createFlowInputs(),this.flow.on("filesSubmitted",function(e){i.flow.upload(),i.appendFiles(e)}),this.flow.on("fileSuccess",function(e,t){var n=JSON.parse(t),r=n.tempName;i.uploadedFiles[r]=e.name,i.files[e.uniqueIdentifier].setTempName(r),i.updateValue()}),this.flow.on("uploadStart",function(){i.$input.trigger("uploadStart")}),this.flow.on("complete",function(){i.$input.trigger("complete")}),this.flow.on("error",function(){i.$input.trigger("error")})}return o(e,[{key:"updateValue",value:function(){var e=Object.keys(this.uploadedFiles);e.length?this.$input.val(JSON.stringify(this.uploadedFiles)):this.$input.val("")}},{key:"appendFiles",value:function(e){var t=this;e.forEach(function(e){var n=new u["default"](e,t);n.appendTo(t.$container.find("[data-el=files]")),t.files[e.uniqueIdentifier]=n})}},{key:"removeFile",value:function(e){if(this.files.hasOwnProperty(e)){var t=this.files[e].getTempName();delete this.files[e],this.removeUploadedFile(t)}}},{key:"removeUploadedFile",value:function(e){if(this.uploadedFiles.hasOwnProperty(e)){delete this.uploadedFiles[e],this.updateValue();var t=this.options.deleteUrl+"?filename="+e;$.ajax({url:t,type:"POST",headers:this.headers})}}},{key:"restoreFiles",value:function(){var e=this,t=this.$input.val();if(t){this.uploadedFiles=JSON.parse(t);var n=Object.keys(this.uploadedFiles);n.forEach(function(t){var n={tempName:t,filename:e.uploadedFiles[t]},i=new c["default"](n,e);i.appendTo(e.$container.find("[data-el=files]")),e.files[t]=i})}}},{key:"createFlowInputs",value:function(){var e=this.$container.find("[data-el=dropArea]");this.flow.assignBrowse(this.$container.find("[data-el=browseLink]")[0]),this.flow.assignDrop(e[0]),e.on("dragenter",function(){e.addClass(p["default"].dropAreaActive)}).on("dragleave drop",function(){e.removeClass(p["default"].dropAreaActive)})}},{key:"reset",value:function(){var e=this;this.flow.cancel(),this.uploadedFiles={};var t=Object.keys(this.files);t.forEach(function(t){e.files[t].remove()}),this.files={},this.updateValue()}}]),e}();t["default"]=h},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();Object.defineProperty(t,"__esModule",{value:!0});var a=n(1),s=i(a),l=function(){function e(t){r(this,e),this.$el=t,this.$el.removeClass(s["default"].progressLineCompleted),this.$el.addClass(s["default"].progressLineUploading),this.setProgress(0)}return o(e,[{key:"setProgress",value:function(e){if(this.progress!==e){var t=Math.round(100*e);this.$el.css({width:t+"%"}),this.progress=e}}},{key:"complete",value:function(){this.$el.removeClass(s["default"].progressLineUploading),this.$el.addClass(s["default"].progressLineCompleted),this.setProgress(1)}}]),e}();t["default"]=l},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();Object.defineProperty(t,"__esModule",{value:!0});var a=n(3),s=i(a),l=function(){function e(t,n){var i=this;r(this,e),this.inputObj=n,this.tempName=t.tempName,this.$container=$(document.createElement("div")),this.$container.html((0,s["default"])(t)),this.$container.on("click","[data-el=remove]",function(){i.destroy()})}return o(e,[{key:"appendTo",value:function(e){this.$container.appendTo(e)}},{key:"destroy",value:function(){this.remove(),this.inputObj.removeFile(this.tempName)}},{key:"getTempName",value:function(){return this.tempName}},{key:"remove",value:function(){this.$container.remove()}}]),e}();t["default"]=l},function(e,t,n){var i=n(4);e.exports=function(e){var t=[],r=e||{};return function(e){e=n(2),t.push('<div data-el="dropArea"'+i.cls([e.dropArea],[!0])+'><span class="glyphicon glyphicon-cloud-download"></span> Перетащите сюда файл или <span data-el="browseLink"'+i.cls([e.browseLink],[!0])+'>выберите</span></div><div data-el="files"></div>')}.call(this,"style"in r?r.style:"undefined"!=typeof style?style:void 0),t.join("")}},function(e,t){}]);